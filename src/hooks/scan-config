#!/bin/bash

# Get the directory where this script is located
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
CONFIG_SCRIPT="$SCRIPT_DIR/commit_scripts/scan_config.py"

# Check if the script exists, show error only if it doesn't exist
if [ ! -f "$CONFIG_SCRIPT" ]; then
    echo "Error: Configuration script not found at: $CONFIG_SCRIPT"
    exit 1
fi

# Run the scan_config.py script using python3 or python, whichever is available
if command -v python3 >/dev/null 2>&1; then
    python3 "$CONFIG_SCRIPT" "$@" 2>/dev/null
else
    python "$CONFIG_SCRIPT" "$@" 2>/dev/null
fi
EXIT_CODE=$?

# Only show message on error
if [ $EXIT_CODE -ne 0 ]; then
    echo "Error launching configuration tool. Exit code: $EXIT_CODE"
fi

exit $EXIT_CODE 